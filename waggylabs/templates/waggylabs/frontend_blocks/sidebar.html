{% load wagtailcore_tags %}
{% load waggylabs_filters %}

{% if modals %}
    {# Unfortunately modals cannot be rendered inside of a tab pane, therefore they are rendered separately on page. #}
    {% for item in value.items %}
        {% if item.block_type == 'visuals' %}
            {% include_block item with modals=True %}
        {% endif %}
    {% endfor %}
{% else %}
<ul class="{{ value.tabs_style }} {{ value.tabs_justify }} {{ value.tabs_orientation }}" id="sidebar-tabs" role="tablist">
    {% for item in value.items %}
    <li class="nav-item mx-1 my-1" role="presentation">
        <button class="{% if 'tab' in value.tabs_style or 'btn' not in value.buttons_style %}nav-link{% if 'btn' not in value.buttons_style %} {{ value.buttons_style }}{% endif %}{% else %} {{ value.buttons_style }}{% endif %} {{ value.tabs_font_size }}{% if forloop.counter0 == 0 %} active{% endif %}" 
            id="id-{{ item.id }}-tab-{{ forloop.counter0 }}" 
            data-bs-toggle="tab" 
            data-bs-target="#id-{{ item.id }}-tab-pane-{{ forloop.counter0 }}" 
            type="button" 
            role="tab" 
            aria-controls="id-{{ item.id }}-tab-pane-{{ forloop.counter0 }}" 
            aria-selected="{% if forloop.counter0 == 0 %}true{% else %}false{% endif %}">
            {% if item.value.icon|is_icon %}<i class="{{ item.value.icon|icon_class }}{% if item.value.title %} me-1{% endif %}"></i>{% endif %}{{ item.value.title }}
        </button>
    </li>
    {% endfor %}
</ul>
<div class="tab-content waggylabs-sidebar-modal" id="sidebar-tab-content">
    {% for item in value.items %}
    <div class="tab-pane fade {% if forloop.counter0 == 0 %}show active{% endif %}" 
        id="id-{{ item.id }}-tab-pane-{{ forloop.counter0 }}" 
        role="tabpanel" 
        aria-labelledby="id-{{ item.id }}-tab-{{ forloop.counter0 }}"
        tabindex="0">
        {% include_block item %}
    </div>
    {% endfor %}
</div>
{% endif %}
